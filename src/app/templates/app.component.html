
<div>

    <div>
      <h1>{{title}}!</h1>
      <h2>{{subtitle}}</h2>
    </div>

    <form>
    	<div class="form_line">
    		<label path="title">Title:</label>
    		<div class="form_controls">
    			<input type="text" class="form-control" #photoTitle placeholder="Title" 
    			(keyup.enter)="photoUploader.updateTitle(photoTitle.value)" 
    			(blur)="photoUploader.updateTitle(photoTitle.value)"
    			/>
    		</div>
    	</div>
    	<div class="form_line">
    		<label>Image:</label>
    		<div class="form_controls">
    			<div class="upload_button_holder">
    				<label class="upload_button" for="fileupload">Upload</label>
    				<!-- onChange hanlder resets the input value to get the change event when uploading the same file consecutively -->
    				<input type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'" 
    				[uploader]="photoUploader.uploader" (change)="fileInput.value=''"
    					multiple />
    			</div>

    		</div>
    	</div>	
    </form>

    <button class="button" (click)="getPhotos()">Get photos</button>


    <br/>


    <h1>Your Photos</h1>

        

        <div class="photos">
        
            <div class="photo" *ngFor="let photo of photos | async">
                <!-- | orderBy:'version':true -->
                <h2 *ngIf="photo.context">{{photo.context.custom.photo}}</h2>
                <a clHref={{photo.public_id}} format="jpg" target="_blank">
                    <cl-transformation quality="auto" fetch-format="auto"></cl-transformation>
                    <cl-image
                            public-id={{photo.public_id}}
                            class="thumbnail inline"
                            width="150"
                            height="150"
                            crop="fit"
                            quality="80"
                            format="jpg"
                            (mouseenter)="photo.isMouseOver = true"
                            (mouseleave)="photo.isMouseOver = false"
                            [attr.opacity]="photo.isMouseOver ? '50' : null"
                    >
                    </cl-image>
                </a>
                <div class="less_info">
                    <button class="toggle_info" style="cursor: help" (click)="photo.shown=true" *ngIf="!photo.shown">Show transformations</button>
                </div>
                <div class="more_info" *ngIf="photo.shown">
                    <button class="toggle_info" (click)="photo.shown=false">Hide transformations</button>
                    <table class="thumbnails">
                        <tr>
                            <td>
                                <div class="thumbnail_holder">
                                    <cl-image public-id={{photo.public_id}} class="thumbnail inline" crop="fill" height="150" width="150" radius="10" format="jpg">
                                    </cl-image>
                                </div>
                                <table class="info">
                                    <tr>
                                        <td>crop</td>
                                        <td>fill</td>
                                    </tr>
                                    <tr>
                                        <td>width</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>height</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>radius</td>
                                        <td>10</td>
                                    </tr>
                                </table>
                                <br/>
                            </td>
                            <td>
                                <div class="thumbnail_holder">
                                    <cl-image public-id={{photo.public_id}} class="thumbnail inline" crop="scale" height="150" width="150" format="jpg">
                                    </cl-image>
                                </div>
                                <table class="info">
                                    <tr>
                                        <td>crop</td>
                                        <td>scale</td>
                                    </tr>
                                    <tr>
                                        <td>width</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>height</td>
                                        <td>150</td>
                                    </tr>
                                </table>
                                <br/>
                            </td>
                            <td>
                                <div class="thumbnail_holder">
                                    <cl-image public-id={{photo.public_id}} class="thumbnail inline" crop="fit" height="150" width="150" format="jpg">
                                    </cl-image>
                                </div>
                                <table class="info">
                                    <tr>
                                        <td>crop</td>
                                        <td>fit</td>
                                    </tr>
                                    <tr>
                                        <td>width</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>height</td>
                                        <td>150</td>
                                    </tr>
                                </table>
                                <br/>
                            </td>
                            <td>
                                <div class="thumbnail_holder">
                                    <cl-image public-id={{photo.public_id}} class="thumbnail inline" crop="thumb" gravity="face" height="150" width="150" format="jpg">
                                    </cl-image>
                                </div>
                                <table class="info">
                                    <tr>
                                        <td>crop</td>
                                        <td>thumb</td>
                                    </tr>
                                    <tr>
                                        <td>gravity</td>
                                        <td>face</td>
                                    </tr>
                                    <tr>
                                        <td>width</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>height</td>
                                        <td>150</td>
                                    </tr>
                                </table>
                                <br/>
                            </td>
                            <td>
                                <div class="thumbnail_holder">
                                    <cl-image public-id={{photo.public_id}} class="thumbnail inline" angle="20" format="jpg">
                                        <cl-transformation height="150" width="150" crop="fill" gravity="north" effect="sepia" radius="20">
                                        </cl-transformation>
                                    </cl-image>
                                </div>
                                <table class="info">
                                    <tr>
                                        <td>crop</td>
                                        <td>fill</td>
                                    </tr>
                                    <tr>
                                        <td>effect</td>
                                        <td>sepia</td>
                                    </tr>
                                    <tr>
                                        <td>gravity</td>
                                        <td>north</td>
                                    </tr>
                                    <tr>
                                        <td>width</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>height</td>
                                        <td>150</td>
                                    </tr>
                                    <tr>
                                        <td>then</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>angle</td>
                                        <td>20</td>
                                    </tr>
                                </table>
                                <br/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

</div>